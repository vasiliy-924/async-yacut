# YaCut - Сервис укорачивания ссылок

YaCut — это веб-сервис для создания коротких ссылок с дополнительной функцией асинхронной загрузки файлов на Яндекс Диск.

## Функциональность
- **Укорачивание ссылок** - создание коротких ссылок из длинных URL
- **Пользовательские ID** - возможность задать свой вариант короткой ссылки
- **Загрузка файлов** - асинхронная загрузка файлов на Яндекс Диск с генерацией ссылок для скачивания
- **Переадресация** - автоматическое перенаправление по коротким ссылкам
- **REST API** - полноценное API для интеграции с другими сервисами

## Техно-стек
- **Backend:** Python 3.12, Flask 3.0.2
- **База данных:** SQLite, SQLAlchemy 2.0.21, Flask-Migrate 4.0.5
- **Формы:** Flask-WTF 1.2.1, WTForms 3.0.1
- **Асинхронность:** aiohttp 3.10.5 (для работы с Яндекс Диском)
- **Тестирование:** pytest 7.1.3, pytest-aiohttp 1.0.5
- **API документация:** OpenAPI 3.0.3 (Swagger)
- **Фронтенд:** Bootstrap 5, Jinja2 шаблоны

## API документация
Спецификация API доступна в файле `openapi.yml`. Для удобного просмотра и тестирования:

### Доступ к документации при запущенном сервере:
После запуска сервера (`flask run`) документация API доступна по адресу:
- **Swagger UI:** [http://127.0.0.1:5000/docs/](http://127.0.0.1:5000/docs/) - интерактивная документация с возможностью тестирования API

### Альтернативный способ:
1. Откройте [Swagger Editor](https://editor.swagger.io/)
2. Скопируйте содержимое файла `openapi.yml` в редактор
3. Изучите доступные эндпоинты и схемы данных

### Основные эндпоинты:
- `POST /api/id/` - создание короткой ссылки
- `GET /api/id/<short_id>/` - получение оригинальной ссылки

### Тестирование API
В директории `postman_collection/` находится готовая коллекция для Postman с тестами:
1. Импортируйте `Yacut.postman_collection.json` в Postman
2. Запустите `set_up_data.sh` для подготовки тестовых данных
3. Запустите коллекцию для проверки всех эндпоинтов

### Как запустить проект Yacut:

Клонировать репозиторий и перейти в него в командной строке:

```
git clone git@github.com:vasiliy-924/async-yacut.git
```

```
cd async-yacut
```

Cоздать и активировать виртуальное окружение:

```
python3 -m venv venv
```

* Если у вас Linux/macOS

    ```
    source venv/bin/activate
    ```

* Если у вас windows

    ```
    source venv/scripts/activate
    ```

Установить зависимости из файла requirements.txt:

```
python3 -m pip install --upgrade pip
```

```
pip install -r requirements.txt
```

Создать в директории проекта файл .env с четыремя переменными окружения:

```
FLASK_APP=yacut
FLASK_ENV=development
SECRET_KEY=your_secret_key
DB=sqlite:///db.sqlite3
```

Создать базу данных и применить миграции:

```
flask db upgrade
```

Запустить проект:

```
flask run
```

## Автор
**Василий Петров** - [GitHub https://github.com/vasiliy-924](https://github.com/vasiliy-924)
- Telegram: [@thunderbasil](https://t.me/thunderbasil)  